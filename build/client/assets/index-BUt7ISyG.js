import{r as o,j as e,c as y}from"./components-B3s0IpTW.js";import{P as N}from"./ProfileLayout-BmGu60BQ.js";import{B as w}from"./BusinessMenu-Dy3rzcrD.js";import{u as F}from"./NotificationContext-7wGW9xfz.js";import{h as k}from"./Lib-DgMjv0aD.js";import"./AuthContext-8FHLzqeM.js";import"./Footer-B-5aMnpr.js";import"./MobileNav-ChBINXPn.js";import"./iconBase-Bk1nv4PK.js";import"./index-CIOWmsy1.js";import"./index-CDpADjvc.js";import"./index-CB7nKGqz.js";const E=({businessGuid:a,userGuid:d,facilityFeatures:n,selectedFacilityFeatures:c})=>{const[f,g]=o.useState(!1),l=F(),[m,_]=o.useState(null),[h,v]=o.useState(null),[u,x]=o.useState(null);o.useEffect(()=>{n&&c&&(_(n),v(c))},[n,c]),o.useEffect(()=>{if(m&&h){const s=m.map(r=>{const t=h.find(i=>i.feature_id===r.feature_id);return{...r,active:!!t,user_description:t?t.user_description:void 0}});x(s)}},[m,h]);const j=s=>{x(r=>r.map(t=>t.feature_id===s?{...t,active:!t.active,user_description:t.user_description?t.user_description:""}:t))},b=(s,r)=>{x(t=>t.map(i=>i.feature_id===s?{...i,user_description:r}:i))},S=async()=>{const t="https://gursse.com"+"/api/listings/selected_facility_features";g(!0),l.notify(),await new Promise(i=>setTimeout(i,1e3));try{const i=u.filter(p=>p.active).map(p=>({feature_id:p.feature_id,user_description:p.user_description}));(await fetch(t,{method:"POST",headers:k,body:JSON.stringify({user_guid:d,business_guid:a,selected:i})})).ok?l.alertReload("","Saved successfully!"):l.alert("","Failed to save.")}catch{l.alert("","Something happened!")}finally{g(!1)}};return e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Select Facility Features"}),n.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u==null?void 0:u.map(s=>e.jsxs("label",{className:"flex items-center space-x-3 p-3 border rounded cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("input",{onChange:()=>j(s.feature_id),type:"checkbox",checked:s.active,className:"hidden"}),e.jsx("div",{className:`w-5 h-5 border-2 rounded ${s.active?"bg-green-500":"bg-white"}`})]}),e.jsxs("div",{className:" w-full",children:[e.jsx("p",{className:"font-medium ",children:s.name}),e.jsx("p",{className:"text-xs ",children:s.description}),e.jsx("div",{className:" w-full h-[100px] mt-1 rounded overflow-hidden",children:e.jsx("textarea",{onChange:r=>b(s.feature_id,r.target.value),className:`w-full h-full bg-gray-100
                                            border p-3 text-sm`,children:s.user_description})})]})]},s.feature_id))}),e.jsx("button",{onClick:S,className:"mt-5 px-4 py-2 bg-blue-600 text-white rounded",children:"Save Selected Features"})]})]})},$=()=>{const a=y(),d=a.businessGuid,n=a.userGuid,c=a.facilityFeatures,f=a.selectedFacilityFeatures;return e.jsxs(N,{title:"Facilities",children:[e.jsx(w,{guid:d,userGuid:n}),e.jsx(E,{userGuid:n,businessGuid:d,facilityFeatures:c,selectedFacilityFeatures:f})]})};export{$ as default};
