import{r as n,j as c}from"./components-B3s0IpTW.js";import{P as g}from"./ProfileLayout-Bcyu3GML.js";import{h,G as d}from"./Lib-DgMjv0aD.js";import{u as x}from"./AuthContext-ClJ_ziLV.js";import{B as E}from"./Businesses-DdknKuq3.js";import"./Footer-rJOjMAOT.js";import"./MobileNav-BsYC7GnI.js";import"./iconBase-Bk1nv4PK.js";import"./index-CIOWmsy1.js";import"./index-CDpADjvc.js";import"./index-CB7nKGqz.js";const P=()=>{const{user:s}=x(),[a,i]=n.useState([]),[l,p]=n.useState(""),u=async t=>{try{const e="https://gursse.com";let o=`/api/listings/owner/${t}`,f=e+o;const r=await fetch(f,{method:"GET",headers:h});r.status!==200&&(console.log("error fetching businesses"),console.log(await r.json()));const m=await r.json();i(m),console.log(m)}catch(e){let o=d({error:e.message},!1,200);return console.log(e.message),i(o),null}};return n.useEffect(()=>{if(s){u(s.guid);let t=(s==null?void 0:s.first_name)+" "+(s==null?void 0:s.last_name);p(t)}},[s]),c.jsx(g,{title:`Welcome, ${l}`,children:s&&a&&c.jsx(E,{user:s,businesses:a})})};export{P as default};
