import{r as d,j as e,b as y}from"./components-B3s0IpTW.js";import{P as U}from"./ProfileLayout-BmGu60BQ.js";import{z as p,u as _,s as D}from"./index-DAH1x-Px.js";import{I as S,B as A}from"./Button-P7evaT8k.js";import{h as E}from"./Lib-DgMjv0aD.js";import{u as N}from"./AuthContext-8FHLzqeM.js";import"./Footer-B-5aMnpr.js";import"./MobileNav-ChBINXPn.js";import"./iconBase-Bk1nv4PK.js";import"./index-CIOWmsy1.js";import"./index-CDpADjvc.js";import"./index-CB7nKGqz.js";const T=p.object({email:p.string({message:"Please enter an email."}).min(1,{message:"Email must not be empty"}).email({message:"Please enter a valid email"})}),k=({loaderData:t,user:l})=>{var c,m,u;const[B,f]=d.useState(null),[v,n]=d.useState(!1),h=r=>{let a=r.target.value,o=r.target.name;f(i=>({...i,[o]:a}))},x=async r=>{n(!0),await new Promise(s=>setTimeout(s,1e3));let a=t.userProfileData.user_guid;const o="https://gursse.com",i="/api/users/activate_deactivate/"+a,j=o+i;r.active=!t.userProfileData.active;try{const s=await fetch(j,{method:"PUT",headers:E,body:JSON.stringify(r)});if(s.ok)alert(`You are now ${r.active?"activated":"deactivated"}`),window.location.reload();else{let Y=s.json().then(P=>{alert(P.message)})}}catch{return}finally{n(!1)}},{register:g,handleSubmit:w,getValues:F,setValue:I,watch:L,setError:R,formState:{errors:b,isSubmitting:V}}=_({defaultValues:t.userProfileData,resolver:D(T)});return e.jsx("form",{onSubmit:w(x),children:e.jsxs("div",{className:"form__wrapper__class",children:[e.jsxs("div",{className:"input__wrapper_class",children:[e.jsx("div",{className:" text-xl text-gray-700 font-semibold border-b pb-1",children:(c=t.userProfileData)!=null&&c.active?"Deactivate User":"Activate User"}),e.jsxs("div",{className:" pt-3 text-[15px] leading-5",children:[e.jsx("b",{children:(m=t.userProfileData)==null?void 0:m.email})," is your current email. It will be used for password resets or changes."]})]}),e.jsx(S,{controlTitle:"Your Email Address",controlPlaceholder:"Retype new password",controlName:"email",controlType:"text",disabled:!0,register:g,changeHandler:h,error:b.newpassword2}),e.jsx(A,{working:v,value:`${(u=t.userProfileData)!=null&&u.active?"Deactivate User":"Activate User"}`})]})})},X=()=>{const t=y(),{user:l}=N();return e.jsx(U,{title:"Activate/Deactivate User",children:t&&e.jsx(k,{loaderData:t,user:l})})};export{X as default};
