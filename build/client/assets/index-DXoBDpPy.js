import{r as u,j as e,b as P}from"./components-B3s0IpTW.js";import{P as j}from"./ProfileLayout-CiPTMqaQ.js";import{u as S}from"./AuthContext-CTVYchcJ.js";import{z as c,u as y,s as _}from"./index-DAH1x-Px.js";import{I as R,B as v}from"./Button-P7evaT8k.js";import{h as E}from"./Lib-NIWUsXcU.js";import"./Footer-ByimyL7f.js";import"./MobileNav-BsYC7GnI.js";import"./iconBase-Bk1nv4PK.js";import"./index-CIOWmsy1.js";import"./index-CDpADjvc.js";import"./index-CB7nKGqz.js";const N=c.object({email:c.string({message:"Please enter an email."}).min(1,{message:"Email must not be empty"}).email({message:"Please enter a valid email"})}),k=({loaderData:s,user:o})=>{var n;const[A,d]=u.useState(null),[p,i]=u.useState(!1),f=t=>{let l=t.target.value,m=t.target.name;d(a=>({...a,[m]:l}))},h=async t=>{i(!0),await new Promise(r=>setTimeout(r,1e3));const a="http://gursse.com"+"/api/users/reset_password_request";t.owner=s.userProfileData.user_guid;try{const r=await fetch(a,{method:"POST",headers:E,body:JSON.stringify(t)});if(r.ok)alert("Request Initiated. Please check your email to continue.");else{let F=r.json().then(b=>{alert(b.error)})}}catch{return}finally{i(!1)}},{register:x,handleSubmit:w,getValues:B,setValue:I,watch:L,setError:T,formState:{errors:g,isSubmitting:D}}=y({defaultValues:s.userProfileData,resolver:_(N)});return e.jsx("form",{onSubmit:w(h),children:e.jsxs("div",{className:"form__wrapper__class",children:[e.jsxs("div",{className:"input__wrapper_class",children:[e.jsx("div",{className:" text-xl text-gray-700 font-semibold border-b pb-1",children:"Reset Password"}),e.jsxs("div",{className:" pt-3 text-[15px] leading-5",children:[e.jsx("b",{children:(n=s.userProfileData)==null?void 0:n.email})," is your current email. It will be used be used for password resets or changes."]})]}),e.jsx(R,{controlTitle:"Your Email Address",controlPlaceholder:"Retype new password",controlName:"email",controlType:"text",disabled:!0,register:x,changeHandler:f,error:g.newpassword2}),e.jsx(v,{working:p,value:"Send Reset Email"})]})})},M=()=>{const s=P(),{user:o}=S();return e.jsx(j,{title:"Reset Password",children:s&&e.jsx(k,{loaderData:s,user:o})})};export{M as default};
