import{r as i,j as e,c as N}from"./components-B3s0IpTW.js";import{P as y}from"./ProfileLayout-2QW4s139.js";import{B as S}from"./BusinessMenu-Dy3rzcrD.js";import{c as D,a as I,b as k}from"./index-BLFHDWCD.js";import{u as P,a as C}from"./AddPhotoDialogContext-DilgpC1R.js";import{u as G}from"./NotificationContext-7wGW9xfz.js";import{I as M,u as z}from"./SliderContext-B3VRyKC1.js";import"./AuthContext-B5y2zgip.js";import"./Lib-DgMjv0aD.js";import"./Footer-DwtHmWFa.js";import"./MobileNav-BsYC7GnI.js";import"./iconBase-Bk1nv4PK.js";import"./index-CIOWmsy1.js";import"./index-CDpADjvc.js";import"./index-CB7nKGqz.js";const _=({item:t,menu:s,userGuid:o,businessGuid:l})=>{const[n,c]=i.useState(!1),[d,a]=i.useState(null),r=P(),u=G(),m=()=>{r.setDialog(!0),r.setImgSrc(t.image_url),r.setImageTitle(t.image_title),r.setUserGuid(o),r.setBusinessGuid(l),r.setImageGuid(t.image_guid),c(!0)},x=async()=>{u.notify(),await new Promise(f=>setTimeout(f,1e3)),r.deletePhoto(o,l,t.image_guid)};return e.jsx("div",{className:"",children:s&&e.jsx("div",{className:` absolute top-2 right-2 w-[80%] bg-white
                rounded-[12px] overflow-hidden border-[1px] border-white
                shadow-md`,children:e.jsx("div",{className:"mt-3",children:e.jsxs("div",{className:" divide-y-[1px]",children:[e.jsx("div",{onMouseDown:m,className:`py-1 hover:bg-gray-300 w-full
                                flex flex-col
                                px-2 transition duration-1000 ease-in-out`,children:"Edit"}),e.jsx("div",{onMouseDown:x,className:`py-1 hover:bg-gray-300 w-full
                                flex flex-col
                                px-2 transition duration-1000 ease-in-out`,children:"Delete"})]})})})})},B=({showCarousel:t,item:s,itemIndex:o,userGuid:l,businessGuid:n})=>{const[c,d]=i.useState(!1),a=()=>{d(!0)},r=async()=>{await new Promise(u=>setTimeout(u,200)),d(!1)};return e.jsx("div",{className:"z-0",children:e.jsxs("div",{className:`border-[1px] h-fit p-1 rounded-md shadow-md
                    hover:cursor-pointer relative z-0`,children:[e.jsx("button",{onMouseDown:a,onBlur:r,className:`w-[30px] h-[30px] z-50 bg-white 
                flex place-content-center place-items-center 
                rounded-full absolute right-2 top-2 cursor-pointer
                hover:bg-gray-500 hover:text-white/80 transition duration-1000 ease-in-out`,children:e.jsx(D,{className:"text-[20px]"})}),e.jsx("div",{onMouseDown:u=>t(o),className:`relative h-[170px] xl:h-[160px]
                         rounded-md overflow-hidden -z-10
                    `,children:e.jsx("img",{src:s.image_url,alt:"",className:`object-cover w-full h-full -z-40
                        `})}),s.image_title.length>0&&e.jsx("div",{className:"text-[13px] mt-2 mb-1.5 leading-[1.2em] mx-[2px]",children:s.image_title}),e.jsx(_,{item:s,menu:c,userGuid:l,businessGuid:n})]})})},R=({slides:t,selectedSlide:s,handleClose:o})=>{const[l,n]=i.useState(0);i.useRef(0),i.useRef(0);const c=()=>{n(a=>a===0?t.length-1:a-1)},d=()=>{n(a=>a===t.length-1?0:a+1)};return i.useEffect(()=>{s!==null&&n(s-1)},[s]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-12 gap-0 ",children:[e.jsxs("div",{className:"col-span-12 md:col-span-9 w-full h-full relative bg-black flex",children:[e.jsx("div",{className:" w-auto h-screen flex overflow-hidden",children:t.map((a,r)=>e.jsx("img",{src:a.image_url,alt:"",style:{transform:`translateX(-${l*100}%)`},className:`object-scale-down w-full h-full 
                                            block flex-shrink-0 flex-grow-0 transition-transform
                                            ease-in-out duration-1000`},r))}),e.jsx("button",{onMouseDown:c,className:`block absolute top-0 bottom-0 
                p-[1rem] cursor-pointer left-0 group h-full 
                transition duration-1000 ease-in-out`,children:e.jsx("div",{className:`w-[50px] h-[50px] bg-white/60 rounded-full place-content-center place-items-center group-hover:bg-white/30
                        transition duration-500 ease-in-out`,children:e.jsx(I,{className:" stroke-white fill-black w-[2rem] h-[2rem]"})})}),e.jsx("button",{onMouseDown:d,className:`block absolute top-0 bottom-0 
                    p-[1rem] cursor-pointer right-0 group 
                     transition duration-1000 ease-in-out`,children:e.jsx("div",{className:`w-[50px] h-[50px] bg-white/60 rounded-full flex place-content-center place-items-center group-hover:bg-white/30
                        transition duration-500 ease-in-out`,children:e.jsx(k,{className:" stroke-white fill-black w-[2rem] h-[2rem]"})})}),e.jsx("div",{onMouseDown:()=>o(),className:`w-[50px] h-[50px] z-[300] bg-white
                    flex place-content-center place-items-center
                    rounded-full absolute left-2 top-2 cursor-pointer
                    hover:bg-white/40 transition duration-1000 ease-in-out`,children:e.jsx(M,{className:"text-[30px]"})})]}),e.jsxs("div",{className:"hidden md:block md:col-span-3 px-5",children:[e.jsx("h1",{className:" text-[22px] my-4 font-sans font-extrabold tracking-tight leading-[24px]",children:"Photos for Jason Won, DPT - Flex With Doctor Jay"}),e.jsxs("div",{className:" my-4 ",children:[l+1," / ",t.length]}),e.jsx("hr",{}),e.jsx("div",{className:" my-4",children:t[l].image_title})]})]})})},E=({overlay:t,setOverlay:s,selectedSlide:o,handleClose:l,gallery:n})=>e.jsx("div",{children:t&&e.jsx("div",{className:`flex w-screen h-screen bg-white z-[1000] 
                fixed top-0 left-0 right-0 bottom-0 `,children:n&&o&&e.jsx(R,{slides:n,selectedSlide:o,handleClose:l})})}),F=({gallery:t,userGuid:s,businessGuid:o})=>{const[l,n]=i.useState(!1),[c,d]=i.useState(0),a=z(),r=()=>{n(!1)},u=m=>{a.setDialog(!0),a.setSelectedSlide(m+1),a.setGallery(t)};return e.jsxs("div",{className:"",children:[e.jsx("div",{className:` border-[1px] p-3 rounded-[5px] 
                grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4
                lg:grid-cols-4 xl:grid-cols-5 gap-2 z-0`,children:t.map((m,x)=>e.jsx("div",{className:"z-0",children:e.jsx(B,{showCarousel:u,item:m,itemIndex:x,userGuid:s,businessGuid:o})},x))}),e.jsx(E,{overlay:l,setOverlay:n,selectedSlide:c+1,handleClose:r,gallery:t})]})},L=({userGuid:t,businessGuid:s})=>{const o=i.useRef(null),[l,n]=i.useState(null),[c,d]=i.useState(null),[a,r]=i.useState(!1),[u,m]=i.useState(!1),[x,f]=i.useState(!1),h=C(),w=g=>{var j;try{const p=(j=g.target.files)==null?void 0:j[0];if(p){const v=URL.createObjectURL(p);n(v),d(p),r(!0),h.setDialog(!0),h.setImgSrc(v),h.setSelectedFile(p),h.setIsImageSelected(!0),h.setUserGuid(t),h.setBusinessGuid(s)}}finally{g.target.value=""}},b=()=>{var g;(g=o.current)==null||g.click()};return e.jsxs("div",{className:"mb-2",children:[e.jsx("button",{onMouseDown:b,className:` bg-blue-800 rounded-md px-3 py-1
                text-white hover:bg-blue-700 transition
                duration-500 ease-in-out hover:shadow-md
                 shadow-gray-900 hover:shadow-black/50`,children:"Add Photo"}),e.jsx("input",{type:"file",accept:"image/*",ref:o,className:" hidden",onChange:w})]})},ee=()=>{const t=N(),s=t.businessGuid,o=t.userGuid,l=t.gallery;return e.jsxs(y,{title:"Photo Gallery",children:[e.jsx(S,{guid:s,userGuid:o}),e.jsx(L,{userGuid:o,businessGuid:s}),l.length>0?e.jsx("div",{className:"z-0",children:e.jsx(F,{gallery:l,userGuid:o,businessGuid:s})}):e.jsx("div",{className:" mt-2 border-[1px] rounded-lg p-3 mb-6",children:"Gallery is empty"})]})};export{ee as default};
