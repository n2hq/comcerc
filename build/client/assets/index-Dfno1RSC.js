import{r as l,j as t,c as _}from"./components-B3s0IpTW.js";import{z as a,u as w,s as j}from"./index-DAH1x-Px.js";import{P as S}from"./ProfileLayout-Bcyu3GML.js";import{B as P}from"./BusinessMenu-Dy3rzcrD.js";import{u as k}from"./NotificationContext-7wGW9xfz.js";import{s as N}from"./Lib-DgMjv0aD.js";import"./AuthContext-ClJ_ziLV.js";import"./Footer-rJOjMAOT.js";import"./MobileNav-BsYC7GnI.js";import"./iconBase-Bk1nv4PK.js";import"./index-CIOWmsy1.js";import"./index-CDpADjvc.js";import"./index-CB7nKGqz.js";const H=/^(?!https?)(?!www\.?).*\..+$/g,T=a.object({username:a.any(),title:a.string().min(1,{message:"Enter a business name"}).min(3,{message:"Busines Name must not be less than 3 characters"}).max(100,{message:"Business name must not be more than 100 characters."}),country_code:a.string({message:"Please select a country"}).min(1,{message:"Please enter a country code."}),address_one:a.string({message:"Please enter an address"}).min(3,{message:"Address must not be less than 3 characters"}).max(100,{message:"Address must not be more than 100 characters"}),address_two:a.any(),state_code:a.any(),state_text:a.any(),country_text:a.any(),city:a.any(),established:a.string({message:"Please enter year established"}).min(4,{message:"Year must be at least 4 characters"}),call_code:a.any(),call_mobile:a.any(),zipcode:a.any(),intro:a.any(),category:a.string().min(2,{message:"Please select a business category"}),business_phrases:a.string({message:"Please enter business phrase"}).min(3,{message:"Business Phrases must not be less than 3 characters"}).max(1e3,{message:"Business Phrases must not be more than 100 characters"}),products:a.string({message:"Please enter products offered"}),services:a.union([a.string({message:"Please enter services offered"}).min(3,{message:"Please enter up to 3 characters"}),a.literal("")]),xsocial:a.any(),fbsocial:a.any(),linksocial:a.any(),website:a.union([a.string().regex(H).nullish(),a.literal("")]),email:a.string({message:"Please enter an email."}).min(1,{message:"Email must not be empty"}).email({message:"Please enter a valid email"})}).superRefine((n,c)=>{var m,r;((m=n==null?void 0:n.address_two)==null?void 0:m.length)!==0&&((r=n==null?void 0:n.address_two)==null?void 0:r.length)<3&&c.addIssue({code:a.ZodIssueCode.custom,path:["address_two"],message:"Enter a minimum of 3 characters"})}),v=["08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00"],B=({data:n,onChange:c,options:m})=>{const[r,o]=l.useState(null),[u,d]=l.useState("no_hours"),[p,g]=l.useState(!1),i=k(),f=async s=>{const e=s;return{Monday:{start:e.monday_from,end:e.monday_to},Tuesday:{start:e.tuesday_from,end:e.tuesday_to},Wednesday:{start:e.wednesday_from,end:e.wednesday_to},Thursday:{start:e.thursday_from,end:e.thursday_to},Friday:{start:e.friday_from,end:e.friday_to},Saturday:{start:e.saturday_from,end:e.saturday_to},Sunday:{start:e.sunday_from,end:e.sunday_to}}};l.useEffect(()=>{(async()=>{const e=await f(n.operatingHours);o(e),c(e),d(n.operatingHours.open_status)})()},[n.operatingHours]);const y=(s,e,h)=>{if(!r)return;const b=e==="start"?h:r[s].start;if((e==="end"?h:r[s].end)<=b){alert(`For ${s}, closing time must be later than opening time.`);return}o({...r,[s]:{...r[s],[e]:h}}),c(r)},x=async()=>{if(u===null)return i.alert("","Please select working hours."),!1;g(!0),i.notify(),await new Promise(s=>setTimeout(s,1e3));try{await N(u,r,n.businessGuid,n.userGuid)===void 0&&i.alert("","Save not successful!")}catch(s){i.alert("",s.message)}finally{g(!1),i.alert("","Save successful!")}};return r?t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"w-full",children:m.map(s=>t.jsxs("label",{className:`flex items-center gap-3 p-3 rounded cursor-pointer ${u===s.value?" bg-blue-50":"border-gray-300"}`,children:[t.jsx("div",{className:"w-[20px]",children:t.jsx("input",{type:"radio",name:"openStatus",value:s.value,checked:u===s.value,onChange:()=>d(s.value),className:"accent-blue-600 w-[20px] h-[20px]"})}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-gray-800",children:s.label}),t.jsx("span",{className:"text-[13px] text-gray-500",children:s.more})]})]},s.value))}),u==="selected_hours"&&Object.keys(r).map(s=>t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("span",{className:"w-24 font-semibold",children:s}),t.jsxs("select",{value:r[s].start,onChange:e=>y(s,"start",e.target.value),className:"border p-2 rounded-md",children:[t.jsx("option",{value:"",children:"From..."}),v.map(e=>t.jsx("option",{value:e,children:e},e))]}),t.jsx("span",{children:"to"}),t.jsxs("select",{value:r[s].end,onChange:e=>y(s,"end",e.target.value),className:"border p-2",children:[t.jsx("option",{value:"",children:"To..."}),v.map(e=>t.jsx("option",{value:e,children:e},e))]})]},s)),t.jsx("div",{children:t.jsx("button",{onClick:x,className:`mt-6 bg-blue-600 text-white px-6 py-2 
                            rounded hover:bg-blue-700 transition
                            shadow-md hover:shadow-lg hover:shadow-black/50`,children:p?"Saving...":"Save Business Hours"})})]}):t.jsx("p",{children:"Loading working hours..."})},R=()=>{const[n,c]=l.useState(null),[m,r]=l.useState(!1),o=_(),[u,d]=l.useState([]),p=[{value:"no_hours",label:"No Hours Available",more:"Visitors won't see business hours on this Page"},{value:"always_open",label:"Always Open",more:"e.g. Parks, beaches, roads"},{value:"permanently_closed",label:"Permanently Closed",more:"Permantently closed"},{value:"temporarily_closed",label:"Temporarily Closed",more:"Temporarily closed"},{value:"selected_hours",label:"Open During Selected Hours",more:"Open during selected hours"}],g=o.userGuid,i=o.businessGuid,{register:f,handleSubmit:y,getValues:x,watch:s,setError:e,formState:{errors:h,isSubmitting:b}}=w({defaultValues:{},resolver:j(T)});return t.jsxs(S,{title:"Edit Settings",children:[t.jsx(P,{guid:i,userGuid:g}),t.jsx("div",{className:"form__wrapper__class ",children:o&&t.jsx("div",{className:"mt-6",children:t.jsx(B,{data:o,onChange:d,options:p})})})]})};export{R as default};
