import{r as g,j as e,b as y}from"./components-B3s0IpTW.js";import{R as N}from"./ResponsiveNav-CSwpN3E1.js";import{z as n,u as S,s as P}from"./index-DAH1x-Px.js";import{u as R}from"./AuthContext-8FHLzqeM.js";import{h as E}from"./Lib-DgMjv0aD.js";import"./MobileNav-BsYC7GnI.js";import"./iconBase-Bk1nv4PK.js";const h=new RegExp(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!()Â£@$%^&*-]).{8,}$/),k=n.object({password:n.string().min(1,{message:"Please enter new password."}).min(8,{message:"Password must be up to 8 characters."}).regex(h,{message:"Please enter a valid password"}),password2:n.string().min(1,{message:"Please enter new password."}).min(8,{message:"Password must be at least 8 characters."}).regex(h,{message:"Please enter a valid password"})}).superRefine((t,o)=>{t.password!==t.password2&&o.addIssue({code:n.ZodIssueCode.custom,path:["password2"],message:"Your new password don't match"})}),C=({guid:t})=>{var x,w;const[o,f]=g.useState(null),{signin:A}=R(),[d,i]=g.useState(!1),p=r=>{let l=r.target.value,c=r.target.name;f(m=>({...m,[c]:l}))},b=async r=>{i(!0),await new Promise(a=>setTimeout(a,1e3)),r.password;const l="https://gursse.com",c=`/api/users/reset_password/${t}`,m=l+c;try{const a=await fetch(m,{method:"PUT",headers:E,body:JSON.stringify(r)});if(a.ok)alert("Password Successfully Changed! Use new password on next login");else{let T=a.json().then(v=>{alert(v.message)})}}catch{return}finally{i(!1)}await new Promise(a=>setTimeout(a,1e3)),i(!1)},{register:u,handleSubmit:j,getValues:D,watch:U,setError:$,formState:{errors:s,isSubmitting:F}}=S({defaultValues:{},resolver:P(k)});return e.jsx("div",{className:"",children:e.jsx("div",{className:"h-screen w-screen bg-white  flex flex-col place-content-center place-items-center pt-16 ",children:e.jsxs("div",{className:" max-w-[300px]",children:[e.jsx("div",{className:" text-[26px] font-[500]",children:e.jsx("div",{className:"pb-1 border-b",children:"Reset Password"})}),e.jsx("div",{className:" mt-4 mb-2 text-[15px] leading-[1.2em]",children:"Use the form below to set a new password for your account!"}),e.jsxs("form",{onSubmit:j(b),children:[e.jsxs("div",{className:" mt-4",children:[e.jsx("input",{...u("password",{onChange:p}),className:" w-full outline-none border-[2px] border-gray-100 focus:border-gray-300 focus:border-[2px]  bg-gray-100  rounded-[8px] h-[50px] px-4",type:"password",placeholder:"Enter email address"}),(s==null?void 0:s.password)&&e.jsx("div",{className:"ml-1 text-red-600 text-[13px]",children:(x=s==null?void 0:s.password)==null?void 0:x.message})]}),e.jsxs("div",{className:" mt-3",children:[e.jsx("input",{...u("password2",{onChange:p}),className:" w-full outline-none border-[2px] border-gray-100 focus:border-gray-300 focus:border-[2px] bg-gray-100   rounded-[8px] h-[50px] px-4",type:"password",placeholder:"Enter password"}),(s==null?void 0:s.password2)&&e.jsx("div",{className:"ml-1 text-red-600 text-[13px]",children:(w=s==null?void 0:s.password2)==null?void 0:w.message})]}),e.jsx("button",{className:`${d?" bg-gray-500/70":"cursor-pointer bg-black"} mt-3  w-full text-white rounded-[8px] h-[50px] px-4`,type:"submit",disabled:d,children:d?"Submitting...":"Set Password"})]}),e.jsx("div",{className:" mt-3 text-[11px]",children:"By proceeding, you consent to get calls, WhatsApp or SMS/RCS messages, including by automated means, from Dersck and its affiliates to the email provided."})]})})})},_=()=>{const o=y().guid;return e.jsxs("div",{children:[e.jsx(N,{}),e.jsx(C,{guid:o})]})};export{_ as default};
