import{r as c,j as e,b as S}from"./components-B3s0IpTW.js";import{P as _}from"./ProfileLayout-BmGu60BQ.js";import{u as y}from"./AuthContext-8FHLzqeM.js";import{z as d,u as v,s as w}from"./index-DAH1x-Px.js";import{I as P,B as N}from"./Button-P7evaT8k.js";import{h as R}from"./Lib-DgMjv0aD.js";import"./Footer-B-5aMnpr.js";import"./MobileNav-ChBINXPn.js";import"./iconBase-Bk1nv4PK.js";import"./index-CIOWmsy1.js";import"./index-CDpADjvc.js";import"./index-CB7nKGqz.js";const B=d.object({email:d.string({message:"Please enter an email."}).min(1,{message:"Email must not be empty"}).email({message:"Please enter a valid email"})}),L=({loaderData:t,user:o})=>{var l,n;const[U,p]=c.useState(null),[f,i]=c.useState(!1),g=r=>{let m=r.target.value,u=r.target.name;p(a=>({...a,[u]:m}))},h=async r=>{i(!0),await new Promise(s=>setTimeout(s,1e3));const a="https://gursse.com"+"/api/users/change_email_request";r.guid=t.userProfileData.user_guid;try{const s=await fetch(a,{method:"POST",headers:R,body:JSON.stringify(r)});if(s.ok)alert("Email Change Request Successfully Sent!");else{let T=s.json().then(E=>{alert(E.error)})}}catch{return}finally{i(!1)}},{register:x,handleSubmit:b,getValues:k,setValue:q,watch:A,setError:C,formState:{errors:j,isSubmitting:F}}=v({defaultValues:t.listing,resolver:w(B)});return e.jsx("form",{onSubmit:b(h),children:e.jsxs("div",{className:"form__wrapper__class",children:[e.jsxs("div",{className:"input__wrapper_class",children:[e.jsx("div",{className:" text-xl text-gray-700 font-semibold border-b pb-1",children:"Current email"}),e.jsxs("div",{className:" pt-3 pb-4 text-[15px] leading-5",children:["[",(l=t.userProfileData)==null?void 0:l.email,"] will be used for account-related notifications and can be used for password resets."]}),e.jsxs("div",{className:"border-[1px] rounded-[8px] px-3 py-3 bg-gray-100",children:[(n=t.userProfileData)==null?void 0:n.email," Â "]})]}),e.jsx(P,{controlTitle:"Update Email",controlPlaceholder:"Enter new email address",controlName:"email",register:x,changeHandler:g,error:j.email}),e.jsx(N,{working:f})]})})},X=()=>{const t=S(),{user:o}=y();return e.jsx(_,{title:"Update Email",children:t&&e.jsx(L,{loaderData:t,user:o})})};export{X as default};
